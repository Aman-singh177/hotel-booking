<% layout("/layouts/boilerplate") %>

<div class="row mt-3">
    <div class="col-8 offset-2">
        <h3> Want to Edit Your List ? </h3>
        <!-- This does 3 things:
            Extracts id from the URL (like 664e7e9e2b5abf7e6c8eeb12)
            Finds that listing in the database.
            Sends it to edit.ejs using res.render(...).
            Now inside your edit.ejs file, youre using this listing object to pre-fill the form:
            Note :::::: value="<= listing.title %>" → this will put the current title from MongoDB into the input field.value="<= listing.title %>" → this will put the current title from MongoDB into the input field.    
        -->
        <form method="POST" action="/listings/<%= listing._id %>?_method=PUT" novalidate class="needs-validation">
            <div class="mb-3">
                <label for="title" class="form-label">Title</label>
                <input name="listing[title]" value="<%= listing.title %>" type="text" required class="form-control"/>
            </div>
             
            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea name="listing[description]" required class="form-control" value="<%= listing.description %> " ></textarea>
            </div>
            <div class="mb-3">
                <label for="image" class="form-label">Image Link</label>
                <input name="listing[image][url]" required value="<%= listing.image?.url %>" type="text" class="form-control">
            </div>
            <div class="row">
                <div class="mb-3 col-md-4">
                    <label for="price" class="form-label">Price</label>
                    <input name="listing[price]" required value="<%= listing.price %>"   class="form-control">
                </div>
                <div class="mb-3 col-md-8">
                    <label for="country" class="form-label">Country</label>
                    <input name="listing[country]" required value="<%= listing.country %>" type="text" class="form-control" >
                </div>
            </div>
            <div class="mb-3">
                <label for="location" class="form-label">Location</label>
                <input name="listing[location]" required value="<%= listing.location %>" type="text" class="form-control">
            </div>   
            <button class="btn btn-dark edit-btn mt-3">Edit</button>
            <br><br>
        </form>
    </div>
</div>
 
